---
date: 2017-04-26T15:05:07-08:00
draft: false
title: "AWSLambdaFace: serverless face recognition"

description: "TL;DR: Serverless compute platforms such as Amazon Web Services
(AWS) lambda were intended to be used for web microservices and to handle
asynchronous events generated by AWS (DynamoDB, S3, SNS, etc.). However, AWS
lambda also allows users to upload arbitrary linux binaries along with their
lambda functions. These binaries can be executed during a lambda invocation,
effectively turning AWS lambda into a supercomputer that can be started
on-demand in seconds and billed at a 100ms granularity. In this post, I will
show you how I deployed a full-blown deep convolutional neural network based
face recognition tool on AWS Lambda (and explain how you can too!)."

---

<div style="width:100%;margin-bottom:10px;">
  <div style="margin: 0 auto;border:solid;border-width:2px;border-color:rgb(200,200,200);text-align:center;min-width:300px;max-width:100%;width:600px;border-radius:10px;">
    <a href="/images/awslambdaface/blog_john_emmons_ec2_console.png">
      <img src="/images/awslambdaface/blog_john_emmons_ec2_console.png" alt="ec2_console" style="width:100%;border-radius:7px;" >
    </a>
    <p style="padding:10px;padding-bottom:0px;text-align:left">
      Figure 1: with function as a service (FaaS) platforms like AWS Lambda,
      going completely <span style="font-style:italic">serverless</span> has
      become a viable option for web technology companies. Rather than buying
      physical machines or provisioning EC2 VMs, companies such
      as <a href="https://acloud.guru/">A Cloud
      Guru</a>, <a href="https://instant.cm/">Instant</a>,
      and <a href="https://serverless.com/">Serverless</a> rely entirely on
      auto-scaling, fully-managed services like DynamoDB, Lambda, SNS, SQS, etc.
      (an empty EC2 dashboard has become a badge of honor!).
    </p>
  </div>
</div>

<p>
  In 2014, Amazon Web Services (AWS) released their function as a service (FaaS)
  platform, Lambda. Since then, a burgeoning community of developers has formed
  around this technology, generating countless web frameworks,
  debugging/monitoring tools, and storage backends specifically designed for
  the <span style="font-style:italic">serverless</span> world. The capabilities
  of this technology is best understood by examining the EC2 dashboard of start
  ups such as <a href="https://acloud.guru/">A Cloud
  Guru</a>, <a href="https://instant.cm/">Instant</a>,
  and <a href="https://serverless.com/">Serverless</a> (figure 1); these
  companies have been built using nothing but serverless technologies like
  Lamdba and DynamoDB. The FaaS paradigm has even worked its way into many major
  businesses outside of the tech industry; for example, Nordstroms has migrated
  many of their on-premise and existing cloud infrastructure to serverless
  platforms, which has helped them improve efficiency in both developer time and
  in operational cost.
</p>

<p>
  There are three things that make FaaS platforms like AWS Lambda different from
  other auto-scaling, web infrastructure services:
  <ol>
    <li>
      Fully-managed operations: developers using FaaS platforms only need to
      write code that follows the simple request-response software pattern. The
      job of provisioning servers, load-balancing, and fixing security
      vulnerabilities are all <span style="font-style:italic">outsourced</span>
      to the FaaS provider. By using these platforms, you are
      essentially <span style="font-style:italic">renting</span> the best
      operations talent on Earth from Amazon, Google, IBM, and Microsoft.
    </li>
    <li>
      Instantaneous start up and infinite scalability: for many applications,
      users expect an interactive experience; and delays above a few hundred
      milliseconds can significantly degrade a user's perceived quality of the
      service. In the past, obtaining interactive speeds required resources to
      be over-provisioned so that delays could be minimized even under spikes in
      load; however, having lots of idle servers is both expensive and adds
      complexity to the system. FaaS platforms provide an interactive experience
      without needing to over-provision resources by having developers
      encapsulate their functionality in Linux containers; these containers can
      be started almost instantly (50 - 100ms in current systems) and
      distributed to additional nodes in a data center quickly during spikes in
      load.
    </li>
    <li>
      Micro-scale billing granularity: Lambda (and other competing services)
      bill based on invocation time rounded up to the nearest 100ms increment,
      so you only pay for what you use. Cloud VMs and container management
      services provide this same benefit, but with much less granularity. For
      example, EC2 bills a minimum of 1 hour and GCE VMs bill a minimum of 10
      mintes. As a result, it is frequently much less expensive to run a system
      on a FaaS platform than with cloud VMs or on-premise servers where
      machines may be idle much of the time.
    </li>
  </ol>
</p>

<div class="row" style="padding:10px;border:solid;border-radius:10px;border-width:2px;border-color:rgb(200,200,200);margin:5px;margin-bottom:10px;">
  <div class="col-md-12" style="padding:5px;text-align:center;font-size:15pt;">
    Let's find George Porter (<a href="https://cseweb.ucsd.edu/~gmporter/">
      <img src="/images/awslambdaface/blog_john_emmons_george_porter.jpg" alt="george_porter" style="width:100%;max-width:40px;border-radius:100px;">
    </a>) with AWS Lambda!
  </div>

  <div class="col-md-6" style="padding-top:5px;">
    NSDI full day
    <video style="width: 100%;" controls autoplay muted loop>
      <source src="https://s3-us-west-2.amazonaws.com/blog-john-emmons-assets/awslambdaface/blog_john_emmons_nsdi.mp4" type="video/mp4" />
      The 'video' tag is not supported by your browser.
    </video>
  </div>
    
  <div class="col-md-6" style="padding-top:5px;">
    George Porter montage
    <video style="width: 100%;" controls autoplay muted loop>
      <source src="https://s3-us-west-2.amazonaws.com/blog-john-emmons-assets/awslambdaface/blog_john_emmons_montage.webm" type="video/webm" />
      The 'video' tag is not supported by your browser.
    </video>
  </div>

  <div class="col-md-12">
    Figure 2:
  </div>
</div>

<p>
  The benefits of AWS Lambda make it perfect for web microservices, but these
  same benefits also make it a great tool for other workloads. In fact, it is
  easy to imagine taking any bursty, highly parallelizeable application and
  implementing it on a FaaS platform; and in doing so, that application would
  gain all of the advantages of these services: fully-managed, scalable, and
  micro-scale billing. To demonstrate this, let's build and deploy an
  application on AWS Lambda that is not a web service! (see figure 2 for a sneak
  preview of the end result!)
</p>

<p>
  
</p>

<p>
  describe face recognition
</p>

<p>
  describe the system architecture (include diagram)
</p>

<p>
  explain the result
</p>

<p>
  wrap up
</p>
